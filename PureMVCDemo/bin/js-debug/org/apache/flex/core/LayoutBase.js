/**
 * Generated by Apache Flex Cross-Compiler from org\apache\flex\core\LayoutBase.as
 * org.apache.flex.core.LayoutBase
 *
 * @fileoverview
 *
 * @suppress {checkTypes|accessControls}
 */

goog.provide('org.apache.flex.core.LayoutBase');

goog.require('org.apache.flex.core.ILayoutParent');
goog.require('org.apache.flex.core.ValuesManager');
goog.require('org.apache.flex.events.Event');
goog.require('org.apache.flex.events.IEventDispatcher');
goog.require('org.apache.flex.utils.CSSUtils');
goog.require('org.apache.flex.core.IBeadLayout');
goog.require('org.apache.flex.utils.Language');



/**
 *  Constructor.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @constructor
 * @implements {org.apache.flex.core.IBeadLayout}
 */
org.apache.flex.core.LayoutBase = function() {
};


/**
 * @protected
 * @type {org.apache.flex.core.ILayoutChild}
 */
org.apache.flex.core.LayoutBase.prototype.host;


/**
 * Changes in size to the host strand are handled (by default) by running the
 * layout sequence. Subclasses can override this function and use event.type
 * to handle specific changes in dimension.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {org.apache.flex.events.Event} event
 */
org.apache.flex.core.LayoutBase.prototype.handleSizeChange = function(event) {
  this.performLayout();
};


/**
 * Handles the addition of children to the host's layoutView by listening for
 * size changes in the children.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {org.apache.flex.events.Event} event
 */
org.apache.flex.core.LayoutBase.prototype.handleChildrenAdded = function(event) {
  
};


/**
 * If changes happen to a layoutView's child, this function will perform the
 * layout again.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {org.apache.flex.events.Event} event
 */
org.apache.flex.core.LayoutBase.prototype.childResizeHandler = function(event) {
  this.performLayout();
};


/**
 * Called whenever "layoutNeeded" event is dispatched against the host strand.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {org.apache.flex.events.Event} event
 */
org.apache.flex.core.LayoutBase.prototype.handleLayoutNeeded = function(event) {
  this.performLayout();
};


/**
 * Handles the final start-up condition by running the layout an initial time.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {org.apache.flex.events.Event} event
 */
org.apache.flex.core.LayoutBase.prototype.handleInitComplete = function(event) {
  this.performLayout();
};


/**
 * Returns an object of margins for the given child.
 * 
 * @asparam child Object The element whose margins are required.
 * @asparam hostWidth Number The usable width dimension of the host.
 * @asparam hostHeight Number The usable height dimension of the host.
 * 
 * @asreturn Object A structure of {top:Number, left:Number, bottom:Number, right:Number}
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {Object} child
 * @param {number} hostWidth
 * @param {number} hostHeight
 * @return {Object}
 */
org.apache.flex.core.LayoutBase.prototype.childMargins = function(child, hostWidth, hostHeight) {
  var /** @type {Object} */ margin = org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "margin");
  var /** @type {Object} */ marginLeft = org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "margin-left");
  var /** @type {Object} */ marginTop = org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "margin-top");
  var /** @type {Object} */ marginRight = org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "margin-right");
  var /** @type {Object} */ marginBottom = org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "margin-bottom");
  var /** @type {number} */ ml = org.apache.flex.utils.CSSUtils.getLeftValue(marginLeft, margin, hostWidth);
  var /** @type {number} */ mr = org.apache.flex.utils.CSSUtils.getRightValue(marginRight, margin, hostWidth);
  var /** @type {number} */ mt = org.apache.flex.utils.CSSUtils.getTopValue(marginTop, margin, hostHeight);
  var /** @type {number} */ mb = org.apache.flex.utils.CSSUtils.getBottomValue(marginBottom, margin, hostHeight);
  if (marginLeft == "auto")
    ml = 0;
  if (marginRight == "auto")
    mr = 0;
  return {left:ml, top:mt, right:mr, bottom:mb};
};


/**
 * Returns an object containing the child's positioning values.
 * 
 * @asparam child Object The element whose positions are required.
 * 
 * @asreturn Object A structure of {top:Number, left:Number, bottom:Number, right:Number}
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @protected
 * @param {Object} child
 * @return {Object}
 */
org.apache.flex.core.LayoutBase.prototype.childPositions = function(child) {
  var /** @type {number} */ left = Number(org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "left"));
  var /** @type {number} */ right = Number(org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "right"));
  var /** @type {number} */ top = Number(org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "top"));
  var /** @type {number} */ bottom = Number(org.apache.flex.core.ValuesManager["valuesImpl"].getValue(child, "bottom"));
  return {top:top, left:left, bottom:bottom, right:right};
};


/**
 * @private
 * @type {boolean}
 */
org.apache.flex.core.LayoutBase.prototype.isLayoutRunning = false;


/**
 * Performs the layout in three parts: before, layout, after.
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @export
 */
org.apache.flex.core.LayoutBase.prototype.performLayout = function() {
  if (this.isLayoutRunning)
    return;
  this.isLayoutRunning = true;
  var /** @type {org.apache.flex.core.ILayoutHost} */ viewBead = org.apache.flex.utils.Language.as(this.host, org.apache.flex.core.ILayoutParent).getLayoutHost();
  viewBead.beforeLayout();
  if (this.layout()) {
    viewBead.afterLayout();
  }
  this.isLayoutRunning = false;
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).dispatchEvent(new org.apache.flex.events.Event("layoutComplete"));
};


/**
 * @copy org.apache.flex.core.IBeadLayout#layout
 *
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion FlexJS 0.8
 * @export
 * @return {boolean}
 */
org.apache.flex.core.LayoutBase.prototype.layout = function() {
  return false;
};


org.apache.flex.core.LayoutBase.prototype.set__strand = function(value) {
  this.host = value;
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("widthChanged", org.apache.flex.utils.Language.closure(this.handleSizeChange, this, 'handleSizeChange'));
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("heightChanged", org.apache.flex.utils.Language.closure(this.handleSizeChange, this, 'handleSizeChange'));
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("sizeChanged", org.apache.flex.utils.Language.closure(this.handleSizeChange, this, 'handleSizeChange'));
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("childrenAdded", org.apache.flex.utils.Language.closure(this.handleChildrenAdded, this, 'handleChildrenAdded'));
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("initComplete", org.apache.flex.utils.Language.closure(this.handleInitComplete, this, 'handleInitComplete'));
  org.apache.flex.utils.Language.as(this.host, org.apache.flex.events.IEventDispatcher, true).addEventListener("layoutNeeded", org.apache.flex.utils.Language.closure(this.handleLayoutNeeded, this, 'handleLayoutNeeded'));
};


org.apache.flex.core.LayoutBase.prototype.get__layoutView = function() {
  var /** @type {org.apache.flex.core.ILayoutHost} */ viewBead = this.host.getLayoutHost();
  return viewBead.contentView;
};


Object.defineProperties(org.apache.flex.core.LayoutBase.prototype, /** @lends {org.apache.flex.core.LayoutBase.prototype} */ {
/** @export */
strand: {
set: org.apache.flex.core.LayoutBase.prototype.set__strand},
/** @export */
layoutView: {
get: org.apache.flex.core.LayoutBase.prototype.get__layoutView}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
org.apache.flex.core.LayoutBase.prototype.FLEXJS_CLASS_INFO = { names: [{ name: 'LayoutBase', qName: 'org.apache.flex.core.LayoutBase', kind: 'class' }], interfaces: [org.apache.flex.core.IBeadLayout] };


/**
 * Prevent renaming of class. Needed for reflection.
 */
goog.exportSymbol('org.apache.flex.core.LayoutBase', org.apache.flex.core.LayoutBase);



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
org.apache.flex.core.LayoutBase.prototype.FLEXJS_REFLECTION_INFO = function () {
  return {
    variables: function () {return {};},
    accessors: function () {
      return {
        'strand': { type: 'org.apache.flex.core.IStrand', access: 'writeonly', declaredBy: 'org.apache.flex.core.LayoutBase'}
      };
    },
    methods: function () {
      return {
        'LayoutBase': { type: '', declaredBy: 'org.apache.flex.core.LayoutBase'},
        'performLayout': { type: 'void', declaredBy: 'org.apache.flex.core.LayoutBase'},
        'layout': { type: 'Boolean', declaredBy: 'org.apache.flex.core.LayoutBase'}
      };
    }
  };
};